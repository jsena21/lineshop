{% extends 'base.html.twig' %}

{% block title %}Panier
{% endblock %}

{% block body %}
	<style>
		.example-wrapper {
			margin: 1em auto;
			max-width: 800px;
			width: 95%;
			font: 18px / 1.5 sans-serif;
		}
		.example-wrapper code {
			background: #F5F5F5;
			padding: 2px 6px;
		}
		table {
			width: 100%;
			border-collapse: collapse;
			margin-top: 20px;
		}
		th,
		td {
			padding: 10px;
			border: 1px solid #ddd;
			text-align: center;
		}
		th {
			background-color: #f5f5f5;
		}

		button {
			margin: 5px;
			padding: 5px 10px;
			background: none;
			border: none;
			cursor: pointer;
		}
		.actions {
			display: flex;
			justify-content: center;
		}
		.actions .fa-trash {
			color: inherit; /* Or specify a color */
		}
	</style>

	<div class="example-wrapper">
		<h1>Panier</h1>

		{% if panier|length > 0 %}
			<form action="{{ path('app_panier_update') }}" method="post">
				<table>
					<thead>
						<tr>
							<th>Image</th>
							<th>Nom</th>
							<th>Quantité</th>
							<th>Prix Unitaire</th>
							<th>Prix Total</th>
							<th>Actions</th>
						</tr>
					</thead>
					<tbody>
						{% for id, article in panier %}
							<tr>
								<td></td>
								<td class="text-success">{{ article.nom }}</td>
								<td style="width: 100px;">
									<input type="number" name="quantities[{{ article.id }}]" value="{{ article.quantite }}" min="1" class="form-control" style="width: 70px; margin: auto;">
								</td>
								<td class="text-success">{{ article.prix }}
									€</td>
								<td class="text-success">{{ article.prix * article.quantite }}
									€</td>
								<td class="actions">
									<form action="{{ path('app_panier_delete_one') }}" method="post" style="display:inline;">
										<input type="hidden" name="id" value="{{ article.id }}">
										<input type="hidden" name="nom" value="{{ article.nom }}">
										<input type="hidden" name="prix" value="{{ article.prix }}">
										<button type="submit">
											<i class="fa-solid fa-trash"></i>
										</button>
									</form>
								</td>
							</tr>
						{% endfor %}
					</tbody>
				</table>
				<div class="text-end mt-3">
					<button type="submit" class="btn btn-success">Recalculer</button>
				</div>
			</form>
		{% else %}
			<p>Votre panier est vide.</p>
		{% endif %}
	</div>
{% endblock %}
